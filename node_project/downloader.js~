<!-- Node program to perform parallel downloads using async.parallel -->

var async = require("async");
var exec = require('child_process').exec;

module.exports = function Downloader() {

	var module1 = process.argv[2];
	var module2 = process.argv[3];

  async.parallel([
    function(callback) {
      var command = "sudo npm install " + module1;
      download(command);
      if(callback())
        callback();
    }, 
    function(callback) {
      var command = "sudo npm install " + module2;
      download(command);
      if(callback())
        callback();
    }
  ], function(err) {
    if(err) return next(err);
    else console.log("Task complete. ");
  });

  function download(command) {
    exec(command, function(err, stdout, strerr) {
        if(err) {
          console.log("Failed to download " + module1);
        }
        else {
          console.log("Downloaded " + module1 + "successfully!");
        }
      });
  }
}
